(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"6HzJ":function(O,n,e){"use strict";e.d(n,"c",function(){return h}),e.d(n,"a",function(){return D}),e.d(n,"b",function(){return m});var S=e("miYZ"),c=e("tsqr"),r=e("k1fw"),I=e("9og8"),F=e("WmNS"),v=e.n(F),J=e("ShgS"),d=e("LeJ0"),j=e("9kvl"),o=e("0lfv"),h=function(t){Object(o.r)(t.token),Object(o.q)(t.tenantId||""),Object(o.o)(t.hospitalId||""),Object(o.p)(t.systemId||"")},D=function(){var i=Object(I.a)(v.a.mark(function t(p,_,M){var E,s;return v.a.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return h(p),f.next=3,_==null||(E=_.fetchUserInfo)===null||E===void 0?void 0:E.call(_);case 3:s=f.sent,s&&M(Object(r.a)(Object(r.a)({},_),{},{currentUser:s,settings:Object(r.a)(Object(r.a)({},J.a),{},{title:(s==null?void 0:s.tenantName)||"",logo:(s==null?void 0:s.tenantLogo)||""})}));case 5:case"end":return f.stop()}},t)}));return function(p,_,M){return i.apply(this,arguments)}}();function m(i){var t=i.systemUrl;if(window.location.port)switch(i.systemCode){case"app-cms":t="//localhost:8091";break;case"app-manage":t="";break;case"app-dtp":t="//localhost:8092";break;case"app-cycms":t="//localhost:8094";break;default:c.default.error("\u627E\u4E0D\u5230\u8BE5\u7CFB\u7EDF, \u7CFB\u7EDFcode:".concat(i.systemCode));return}else t=t.replace(/\/+$/,"");Object(o.n)("ehospital_jumpData",JSON.stringify(i),d.a),Object(o.n)("ehospital_token","".concat(i.token),d.a),Object(o.c)("ehospital_systemLoginData",d.a),setTimeout(function(){t.indexOf("localhost")>=0||t.startsWith("http")?window.location.href="".concat(t,"/#/fastLogin"):j.c.replace("/fastLogin")},300)}},FkFw:function(O,n,e){O.exports={"loading-area":"loading-area___1mRlC",text:"text___MQGx4"}},LeJ0:function(O,n,e){"use strict";e.d(n,"a",function(){return c});var S="0066aa789984e4dd2500f26778514aec",c="fosun-creative.com",r=new Map([["app-cms",new Map([["dev","https://digital-hospital-admin.dev.fosun-creative.com/fosun-health-fe-admin"],["stage","https://digital-hospital-admin.test.fosun-creative.com/fosun-health-fe-admin"],["pre","https://digital-hospital-admin.pre.fosun-creative.com/fosun-health-fe-admin"],["production","https://digital-hospital-admin.fosun-creative.com/fosun-health-fe-admin"]])],["app-manage",new Map([["dev","https://digital-hospital-admin.dev.fosun-creative.com/fe-fh-hospital-config"],["stage","https://digital-hospital-admin.test.fosun-creative.com/fe-fh-hospital-config"],["pre","https://digital-hospital-admin.pre.fosun-creative.com/fe-fh-hospital-config"],["production","https://digital-hospital-admin.fosun-creative.com/fe-fh-hospital-config"]])]])},kMzy:function(O,n,e){"use strict";e.r(n);var S=e("J+/v"),c=e("MoRW"),r=e("+L6B"),I=e("2/Rp"),F=e("T2oS"),v=e("W9HT"),J=e("miYZ"),d=e("tsqr"),j=e("9og8"),o=e("tJVT"),h=e("WmNS"),D=e.n(h),m=e("q1tI"),i=e.n(m),t=e("LeJ0"),p=e("63rs"),_=e("0lfv"),M=e("6HzJ"),E=e("FkFw"),s=e.n(E),a=e("nKUr"),f=e.n(a),Y=function(){var Z=Object(m.useState)(),N=Object(o.a)(Z,2),U=N[0],L=N[1],Q=function(){var $=Object(j.a)(D.a.mark(function k(){var T,P,g,C,w,u,A,b,B,W,R,K,H,x,z,G,y;return D.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(P=JSON.parse(Object(_.e)("ehospital_jumpData")||"{}"),g=P.systemId,C=P.sign,w=P.userId,u=null,!(C&&g)){l.next=9;break}return l.next=6,Object(p.f)({systemId:g},{userId:w,sign:C});case 6:u=l.sent,l.next=11;break;case 9:L(!1),d.default.error("sign\u4E0D\u5B58\u5728, \u8BF7\u68C0\u67E5");case 11:((T=u)===null||T===void 0?void 0:T.status)===200?(W=((A=u)===null||A===void 0?void 0:A.data)||{},R=W.token,K=R===void 0?"":R,H=W.isMultipleSys,x=((b=u)===null||b===void 0||(B=b.data)===null||B===void 0?void 0:B.userInfo)||{},z=x.tenantId,G=x.hospitalId,L(!0),Object(M.c)({token:K,tenantId:z,hospitalId:G,systemId:g,isMultipleSys:H}),Object(_.n)("ehospital_token",K,t.a),setTimeout(function(){window.location.port?window.location.replace("/"):window.location.replace(window.location.origin+window.location.pathname)},300)):(L(!1),d.default.error(((y=u)===null||y===void 0?void 0:y.message)||"\u83B7\u53D6\u4FE1\u606F\u5931\u8D25"));case 12:case"end":return l.stop()}},k)}));return function(){return $.apply(this,arguments)}}();return Object(m.useEffect)(function(){Q().then(function(){})},[]),Object(a.jsxs)("div",{children:[U!==!1&&Object(a.jsx)("div",{children:Object(a.jsxs)("div",{className:s.a["loading-area"],children:[Object(a.jsx)(v.a,{size:"large"}),Object(a.jsxs)("div",{className:s.a.text,children:[" ",U?"\u767B\u5F55\u6210\u529F\uFF0C\u8DF3\u8F6C\u4E2D":"\u767B\u5F55\u4E2D..."," "]})]})}),U===!1&&Object(a.jsx)("div",{children:Object(a.jsx)(c.a,{status:"error",title:"\u767B\u5F55\u5931\u8D25",extra:[Object(a.jsx)(I.a,{type:"primary",onClick:function(){Object(_.l)()},children:"\u8FD4\u56DE"},"console")]})})]})};n.default=Y}}]);
